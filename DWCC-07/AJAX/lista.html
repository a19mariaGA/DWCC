<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>DWEC07.- Ejemplo jQuery método ajax</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script type="text/javascript">

        //generar que engloba todas las funciones 
        $(() => {
            

            //funcion que muestra los nombres en una lista desordenada
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/users',
                type: 'GET',
                async: true,
                success: (listarUsuarios)=> {
					listarUsuarios.forEach(function(user) {
                        $('#usuarios').append('<li>' + user.id + ' ' + user.name + ' ' + user.username + '</li>');
                    });		
            
                },
                error: function(jqXHR, status, error) {
                    console.error("Error:", error);
                }
            });

            // funcion que muestra todos los usuarios
			document.getElementById('datos').addEventListener('click', function() {
                $.ajax({
                    url: 'https://jsonplaceholder.typicode.com/users',
                    type: 'GET',
                    async: true,
                    success: function(datosCompletos) {
                       
                        datosCompletos.forEach(function(user) {
                            $('#datosCompletos').append('<li>' + JSON.stringify(user) + '</li>');
                        });
                    },
                    error: function(jqXHR, status, error) {
                        console.error("Error:", error);
                    }
                });
            });

            //funcion para seleccionar el album
			$.ajax({
                url: 'https://jsonplaceholder.typicode.com/albums',
                type: 'GET',
                async: true,
                success: function(seleccionAlbum) {
                    var selectAlbum = $("#albumes");
                    $.each(seleccionAlbum, function(index, album) {
                        selectAlbum.append($("<option>").text(album.title).attr("value", album.id));
                    });
                },
                error: function(jqXHR, status, error) {
                    console.error("Error:", error);
                }
            });


      // Función para cargar fotos del álbum seleccionado
      $("#albumes").change(function() {
                var albumId = $(this).val();
                $.ajax({
                    url: 'https://jsonplaceholder.typicode.com/photos?albumId=' + albumId,
                    type: 'GET',
                    async: true,
                    success: function(photos) {
                        $('#fotosAlbum').empty(); // Limpiar las fotos anteriores
                        // Mostrar las primeras 3 fotos del álbum seleccionado
                        for (var i = 0; i < 3; i++) {
                            $('#fotosAlbum').append('<li> <img src= photos[i].thumbnailUrl > </li>');
                        }
                    },
                    error: function(jqXHR, status, error) {
                        console.error("Error:", error);
                    }
                });
            });




	});


    </script>
</head>
<body>

    <h2>Usuarios</h2>
    <ul id="usuarios"></ul>

    <h2>Datos Completos de Usuarios</h2>
    <ul id="datosCompletos"></ul>

  
    <button id="datos">Mostrar datos completos de los usuarios</button>

	<h2>Selecciona un Álbum</h2>
    <select id="albumes">
        <option value=""> </option>
    </select>
	
	<h2>Fotos del Álbum Seleccionado</h2>
    <ul id="fotosAlbum"></ul>

</body>
</html>
